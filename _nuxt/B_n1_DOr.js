import{v as L,g as c,x as f,R as P,r as n,K as g,S as H,T as J,B as q,U as T,o as G,c as j,a as F,t as K,b as z,V as Q}from"./Kie6mjiM.js";const X=()=>({sayExample:()=>console.log("HELLO FROM COMPOSABLES")}),Y=L({__name:"MainButton",props:{text:{type:String},color:{type:String},textColor:{type:String},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},progress:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:o}){const e=t,a=o,{setMainButtonParams:i,onMainButtonClicked:s,hideMainButton:u,showMainButtonProgress:r,hideMainButtonProgress:A}=Ae();return c(()=>e.text,l=>{i({text:l})}),c(()=>e.color,l=>{i({color:l})}),c(()=>e.textColor,l=>{i({text_color:l})}),c(()=>e.visible,l=>{i({is_visible:l})}),c(()=>e.disabled,l=>{i({is_active:!l})}),c(()=>e.progress,l=>{l?r():A()}),s(()=>a("click")),f(()=>{e.progress?r():A(),i({text:e.text,text_color:e.textColor,color:e.color,is_active:!e.disabled,is_visible:e.visible})}),P(()=>{A(),u()}),(l,m)=>null}}),{initData:Z,initDataUnsafe:ee,version:te,platform:ae,isVersionAtLeast:_,sendData:ne,close:oe}=Telegram.WebApp,D=n(!1),ie=(...t)=>{Telegram.WebApp.ready(...t),D.value=!0},I=t=>Telegram.WebApp.platform===t,V=I("unknown"),re={ClosingConfirmation:"6.2",CloudStorage:"6.9",RequestWriteAccess:"6.9",RequestContact:"6.9",SettingsButton:"7.0",BiometricManager:"7.2",DisableVerticalSwipes:"7.7"},se=t=>_(re[t]),le=!V&&Telegram.WebApp.initData==="";function d(){return{initData:Z,initDataUnsafe:ee,version:te,platform:ae,isVersionAtLeast:_,onEvent:(t,o,e={manual:!1})=>{const{manual:a}=e,i=()=>{Telegram.WebApp.onEvent(t,o)},s=()=>{Telegram.WebApp.offEvent(t,o)};return a?i():(f(i),P(s)),{off:s}},sendData:ne,ready:ie,close:oe,isReady:H(D),isPlatform:I,isPlatformUnknown:V,isFeatureSupported:se,canSendData:le}}n(Telegram.WebApp.BackButton.isVisible);Telegram.WebApp.BiometricManager;n(Telegram.WebApp.BiometricManager.isInited);n(Telegram.WebApp.BiometricManager.isBiometricAvailable);n(Telegram.WebApp.BiometricManager.biometricType);n(Telegram.WebApp.BiometricManager.isAccessRequested);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.deviceId);Telegram.WebApp;n(Telegram.WebApp.isClosingConfirmationEnabled);const b=Telegram.WebApp.CloudStorage;function pe(t,o){return new Promise((e,a)=>{b.setItem(t,o,(i,s)=>{i&&a(i),e(s)})})}function ue(t){return new Promise((o,e)=>{b.getItem(t,(a,i)=>{a&&e(a),o(i)})})}function me(t){return new Promise((o,e)=>{b.getItems(t,(a,i)=>{a&&e(a),o(i)})})}function ce(t){return new Promise((o,e)=>{b.removeItem(t,(a,i)=>{a&&e(a),o(i)})})}function ge(t){return new Promise((o,e)=>{b.removeItems(t,(a,i)=>{a&&e(a),o(i)})})}function be(){return new Promise((t,o)=>{b.getKeys((e,a)=>{e&&o(e),t(a)})})}function W(){return{setStorageItem:pe,getStorageItem:ue,getStorageItems:me,removeStorageItem:ce,removeStorageItems:ge,getStorageKeys:be}}Telegram.WebApp.HapticFeedback;const k=n(Telegram.WebApp.MainButton.text),E=n(Telegram.WebApp.MainButton.color),U=n(Telegram.WebApp.MainButton.textColor),N=n(Telegram.WebApp.MainButton.isVisible),O=n(Telegram.WebApp.MainButton.isActive),R=n(Telegram.WebApp.MainButton.isProgressVisible);function p(){k.value=Telegram.WebApp.MainButton.text,E.value=Telegram.WebApp.MainButton.color,U.value=Telegram.WebApp.MainButton.textColor,N.value=Telegram.WebApp.MainButton.isVisible,O.value=Telegram.WebApp.MainButton.isActive,R.value=Telegram.WebApp.MainButton.isProgressVisible}function v(...t){Telegram.WebApp.MainButton.setText(...t),p()}function M(...t){Telegram.WebApp.MainButton.show(...t),p()}function S(...t){Telegram.WebApp.MainButton.hide(...t),p()}function h(...t){Telegram.WebApp.MainButton.enable(...t),p()}function y(...t){Telegram.WebApp.MainButton.disable(...t),p()}function x(...t){Telegram.WebApp.MainButton.showProgress(...t),p()}function C(...t){Telegram.WebApp.MainButton.hideProgress(...t),p()}function B(...t){Telegram.WebApp.MainButton.setParams(...t),p()}function Ae(){const{onEvent:t}=d(),o=(e,a)=>t("mainButtonClicked",e,a);return{mainButtonText:g({get(){return k.value},set(e){v(e)}}),mainButtonColor:g({get(){return E.value},set(e){B({color:e})}}),mainButtonTextColor:g({get(){return U.value},set(e){B({text_color:e})}}),isMainButtonVisible:g({get(){return N.value},set(e){e?M():S()}}),isMainButtonActive:g({get(){return O.value},set(e){e?h():y()}}),isMainButtonProgressVisible:g({get(){return R.value},set(e){e?x():C()}}),setMainButtonText:v,onMainButtonClicked:o,showMainButton:M,hideMainButton:S,enableMainButton:h,disableMainButton:y,showMainButtonProgress:x,hideMainButtonProgress:C,setMainButtonParams:B}}Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;d();n(Telegram.WebApp.SettingsButton.isVisible);n(Telegram.WebApp.colorScheme);n(Telegram.WebApp.themeParams);n(Telegram.WebApp.headerColor);n(Telegram.WebApp.backgroundColor);n(Telegram.WebApp.isExpanded);n(Telegram.WebApp.viewportHeight);n(Telegram.WebApp.viewportStableHeight);n(Telegram.WebApp.isVerticalSwipesEnabled);const w="initData",de="tgWebApp",Te=J(de,()=>{const t=n(null),o=n(null),e=n(null),a=()=>{t.value=d(),t.value.version>"6.0"&&(i(),s())},i=()=>{window.Telegram.WebApp.CloudStorage.getItem(w,(u,r)=>{typeof r=="string"&&r===""?(o.value=d().initDataUnsafe,W().setStorageItem(w,JSON.stringify(o.value))):o.value=JSON.parse(r)})},s=()=>{window.Telegram.WebApp.CloudStorage.getItem("initDataSave",(u,r)=>{typeof r=="string"&&r===""?(e.value=d().initData,W().setStorageItem("initDataSave",JSON.stringify(e.value))):e.value=JSON.parse(r)})};return{webAppData:t,dataUnsafe:o,init:a,dataSafe:e}}),Be={key:0},fe={__name:"MyIndex",setup(t){const o=q(),{sayExample:e}=X();e();const a=Te();a.init();const i=async()=>{const s=new URLSearchParams(a.dataSafe),u=s.get("hash");s.delete("hash"),s.sort();let r="";for(const[m,$]of s.entries())r+=`${m}=${$}
`;r=r.slice(0,-1);const A=`${r}:${u}`,l=btoa(unescape(encodeURIComponent(A)));try{const m=await $fetch("/api/v1/create-portfolio",{method:"POST",headers:{"Content-Type":"application/json",TGWebAppToken:`TGWebApp ${l}`},body:JSON.stringify({name:"Shit coins",owner_id:518774723}),baseURL:"http://127.0.0.1:8080"});console.log("response: ",m)}catch(m){console.log("error: ",m)}};return f(()=>{o.$sayHello()}),(s,u)=>T(a).dataUnsafe?(G(),j("div",Be,[F("h1",null,"Hello Telegram mini app, my name is "+K(T(a).dataUnsafe.user.first_name),1),z(T(Y),{onClick:i})])):Q("",!0)}},ve=fe;export{ve as default};
