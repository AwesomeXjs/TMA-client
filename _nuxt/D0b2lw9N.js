import{v as L,g as u,x as d,R as C,r as n,K as m,S as N,T as H,B as O,U as A,o as q,c as $,a as F,t as G,b as J,V as K}from"./CPAJq9g2.js";const j=()=>({sayExample:()=>console.log("HELLO FROM COMPOSABLES")}),z=L({__name:"MainButton",props:{text:{type:String},color:{type:String},textColor:{type:String},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},progress:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:o}){const t=e,a=o,{setMainButtonParams:r,onMainButtonClicked:i,hideMainButton:p,showMainButtonProgress:T,hideMainButtonProgress:b}=ge();return u(()=>t.text,s=>{r({text:s})}),u(()=>t.color,s=>{r({color:s})}),u(()=>t.textColor,s=>{r({text_color:s})}),u(()=>t.visible,s=>{r({is_visible:s})}),u(()=>t.disabled,s=>{r({is_active:!s})}),u(()=>t.progress,s=>{s?T():b()}),i(()=>a("click")),d(()=>{t.progress?T():b(),r({text:t.text,text_color:t.textColor,color:t.color,is_active:!t.disabled,is_visible:t.visible})}),C(()=>{b(),p()}),(s,Te)=>null}}),{initData:Q,initDataUnsafe:X,version:Y,platform:Z,isVersionAtLeast:P,sendData:ee,close:te}=Telegram.WebApp,w=n(!1),ae=(...e)=>{Telegram.WebApp.ready(...e),w.value=!0},_=e=>Telegram.WebApp.platform===e,V=_("unknown"),ne={ClosingConfirmation:"6.2",CloudStorage:"6.9",RequestWriteAccess:"6.9",RequestContact:"6.9",SettingsButton:"7.0",BiometricManager:"7.2",DisableVerticalSwipes:"7.7"},oe=e=>P(ne[e]),re=!V&&Telegram.WebApp.initData==="";function g(){return{initData:Q,initDataUnsafe:X,version:Y,platform:Z,isVersionAtLeast:P,onEvent:(e,o,t={manual:!1})=>{const{manual:a}=t,r=()=>{Telegram.WebApp.onEvent(e,o)},i=()=>{Telegram.WebApp.offEvent(e,o)};return a?r():(d(r),C(i)),{off:i}},sendData:ee,ready:ae,close:te,isReady:N(w),isPlatform:_,isPlatformUnknown:V,isFeatureSupported:oe,canSendData:re}}n(Telegram.WebApp.BackButton.isVisible);Telegram.WebApp.BiometricManager;n(Telegram.WebApp.BiometricManager.isInited);n(Telegram.WebApp.BiometricManager.isBiometricAvailable);n(Telegram.WebApp.BiometricManager.biometricType);n(Telegram.WebApp.BiometricManager.isAccessRequested);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.deviceId);Telegram.WebApp;n(Telegram.WebApp.isClosingConfirmationEnabled);const c=Telegram.WebApp.CloudStorage;function ie(e,o){return new Promise((t,a)=>{c.setItem(e,o,(r,i)=>{r&&a(r),t(i)})})}function se(e){return new Promise((o,t)=>{c.getItem(e,(a,r)=>{a&&t(a),o(r)})})}function le(e){return new Promise((o,t)=>{c.getItems(e,(a,r)=>{a&&t(a),o(r)})})}function pe(e){return new Promise((o,t)=>{c.removeItem(e,(a,r)=>{a&&t(a),o(r)})})}function ue(e){return new Promise((o,t)=>{c.removeItems(e,(a,r)=>{a&&t(a),o(r)})})}function me(){return new Promise((e,o)=>{c.getKeys((t,a)=>{t&&o(t),e(a)})})}function ce(){return{setStorageItem:ie,getStorageItem:se,getStorageItems:le,removeStorageItem:pe,removeStorageItems:ue,getStorageKeys:me}}Telegram.WebApp.HapticFeedback;const I=n(Telegram.WebApp.MainButton.text),D=n(Telegram.WebApp.MainButton.color),E=n(Telegram.WebApp.MainButton.textColor),k=n(Telegram.WebApp.MainButton.isVisible),U=n(Telegram.WebApp.MainButton.isActive),R=n(Telegram.WebApp.MainButton.isProgressVisible);function l(){I.value=Telegram.WebApp.MainButton.text,D.value=Telegram.WebApp.MainButton.color,E.value=Telegram.WebApp.MainButton.textColor,k.value=Telegram.WebApp.MainButton.isVisible,U.value=Telegram.WebApp.MainButton.isActive,R.value=Telegram.WebApp.MainButton.isProgressVisible}function W(...e){Telegram.WebApp.MainButton.setText(...e),l()}function f(...e){Telegram.WebApp.MainButton.show(...e),l()}function M(...e){Telegram.WebApp.MainButton.hide(...e),l()}function v(...e){Telegram.WebApp.MainButton.enable(...e),l()}function x(...e){Telegram.WebApp.MainButton.disable(...e),l()}function S(...e){Telegram.WebApp.MainButton.showProgress(...e),l()}function y(...e){Telegram.WebApp.MainButton.hideProgress(...e),l()}function B(...e){Telegram.WebApp.MainButton.setParams(...e),l()}function ge(){const{onEvent:e}=g(),o=(t,a)=>e("mainButtonClicked",t,a);return{mainButtonText:m({get(){return I.value},set(t){W(t)}}),mainButtonColor:m({get(){return D.value},set(t){B({color:t})}}),mainButtonTextColor:m({get(){return E.value},set(t){B({text_color:t})}}),isMainButtonVisible:m({get(){return k.value},set(t){t?f():M()}}),isMainButtonActive:m({get(){return U.value},set(t){t?v():x()}}),isMainButtonProgressVisible:m({get(){return R.value},set(t){t?S():y()}}),setMainButtonText:W,onMainButtonClicked:o,showMainButton:f,hideMainButton:M,enableMainButton:v,disableMainButton:x,showMainButtonProgress:S,hideMainButtonProgress:y,setMainButtonParams:B}}Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;g();n(Telegram.WebApp.SettingsButton.isVisible);n(Telegram.WebApp.colorScheme);n(Telegram.WebApp.themeParams);n(Telegram.WebApp.headerColor);n(Telegram.WebApp.backgroundColor);n(Telegram.WebApp.isExpanded);n(Telegram.WebApp.viewportHeight);n(Telegram.WebApp.viewportStableHeight);n(Telegram.WebApp.isVerticalSwipesEnabled);const h="initData",be="tgWebApp",Ae=H(be,()=>{const e=n(null),o=n(null),t=()=>{e.value=g(),e.value.version>"6.0"&&a()},a=()=>{window.Telegram.WebApp.CloudStorage.getItem(h,(r,i)=>{typeof i=="string"&&i===""?(o.value=g().initDataUnsafe,ce().setStorageItem(h,JSON.stringify(o.value))):o.value=JSON.parse(i)})};return{webAppData:e,dataUnsafe:o,init:t}}),Be={key:0},de={__name:"MyIndex",setup(e){const o=O(),{sayExample:t}=j();t();const a=Ae();a.init();const r=async()=>{const i=new URLSearchParams(a.dataUnsafe).toString();try{const p=await $fetch(`/api/v1/test-validate?${i}`,{baseURL:"http://127.0.0.1:8080"});console.log("response: ",p)}catch(p){console.log("error: ",p)}};return d(()=>{o.$sayHello()}),(i,p)=>A(a).dataUnsafe?(q(),$("div",Be,[F("h1",null,"Hello Telegram mini app, my name is "+G(A(a).dataUnsafe.user.first_name),1),J(A(z),{onClick:r})])):K("",!0)}},fe=de;export{fe as default};
