import{v as J,g as u,x as f,R as P,r as n,K as m,S as F,T as G,B as K,U as d,o as j,c as z,a as Q,t as X,b as Y,V as Z}from"./XW3mNJ1j.js";const ee=()=>({sayExample:()=>console.log("HELLO FROM COMPOSABLES")}),te=J({__name:"MainButton",props:{text:{type:String},color:{type:String},textColor:{type:String},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},progress:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:o}){const e=t,a=o,{setMainButtonParams:i,onMainButtonClicked:l,hideMainButton:A,showMainButtonProgress:T,hideMainButtonProgress:s}=Be();return u(()=>e.text,r=>{i({text:r})}),u(()=>e.color,r=>{i({color:r})}),u(()=>e.textColor,r=>{i({text_color:r})}),u(()=>e.visible,r=>{i({is_visible:r})}),u(()=>e.disabled,r=>{i({is_active:!r})}),u(()=>e.progress,r=>{r?T():s()}),l(()=>a("click")),f(()=>{e.progress?T():s(),i({text:e.text,text_color:e.textColor,color:e.color,is_active:!e.disabled,is_visible:e.visible})}),P(()=>{s(),A()}),(r,g)=>null}}),{initData:ae,initDataUnsafe:ne,version:oe,platform:ie,isVersionAtLeast:k,sendData:re,close:se}=Telegram.WebApp,D=n(!1),le=(...t)=>{Telegram.WebApp.ready(...t),D.value=!0},I=t=>Telegram.WebApp.platform===t,_=I("unknown"),pe={ClosingConfirmation:"6.2",CloudStorage:"6.9",RequestWriteAccess:"6.9",RequestContact:"6.9",SettingsButton:"7.0",BiometricManager:"7.2",DisableVerticalSwipes:"7.7"},ue=t=>k(pe[t]),me=!_&&Telegram.WebApp.initData==="";function b(){return{initData:ae,initDataUnsafe:ne,version:oe,platform:ie,isVersionAtLeast:k,onEvent:(t,o,e={manual:!1})=>{const{manual:a}=e,i=()=>{Telegram.WebApp.onEvent(t,o)},l=()=>{Telegram.WebApp.offEvent(t,o)};return a?i():(f(i),P(l)),{off:l}},sendData:re,ready:le,close:se,isReady:F(D),isPlatform:I,isPlatformUnknown:_,isFeatureSupported:ue,canSendData:me}}n(Telegram.WebApp.BackButton.isVisible);Telegram.WebApp.BiometricManager;n(Telegram.WebApp.BiometricManager.isInited);n(Telegram.WebApp.BiometricManager.isBiometricAvailable);n(Telegram.WebApp.BiometricManager.biometricType);n(Telegram.WebApp.BiometricManager.isAccessRequested);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.deviceId);Telegram.WebApp;n(Telegram.WebApp.isClosingConfirmationEnabled);const c=Telegram.WebApp.CloudStorage;function ce(t,o){return new Promise((e,a)=>{c.setItem(t,o,(i,l)=>{i&&a(i),e(l)})})}function ge(t){return new Promise((o,e)=>{c.getItem(t,(a,i)=>{a&&e(a),o(i)})})}function be(t){return new Promise((o,e)=>{c.getItems(t,(a,i)=>{a&&e(a),o(i)})})}function Ae(t){return new Promise((o,e)=>{c.removeItem(t,(a,i)=>{a&&e(a),o(i)})})}function Te(t){return new Promise((o,e)=>{c.removeItems(t,(a,i)=>{a&&e(a),o(i)})})}function de(){return new Promise((t,o)=>{c.getKeys((e,a)=>{e&&o(e),t(a)})})}function W(){return{setStorageItem:ce,getStorageItem:ge,getStorageItems:be,removeStorageItem:Ae,removeStorageItems:Te,getStorageKeys:de}}Telegram.WebApp.HapticFeedback;const V=n(Telegram.WebApp.MainButton.text),U=n(Telegram.WebApp.MainButton.color),E=n(Telegram.WebApp.MainButton.textColor),N=n(Telegram.WebApp.MainButton.isVisible),O=n(Telegram.WebApp.MainButton.isActive),R=n(Telegram.WebApp.MainButton.isProgressVisible);function p(){V.value=Telegram.WebApp.MainButton.text,U.value=Telegram.WebApp.MainButton.color,E.value=Telegram.WebApp.MainButton.textColor,N.value=Telegram.WebApp.MainButton.isVisible,O.value=Telegram.WebApp.MainButton.isActive,R.value=Telegram.WebApp.MainButton.isProgressVisible}function v(...t){Telegram.WebApp.MainButton.setText(...t),p()}function M(...t){Telegram.WebApp.MainButton.show(...t),p()}function S(...t){Telegram.WebApp.MainButton.hide(...t),p()}function h(...t){Telegram.WebApp.MainButton.enable(...t),p()}function x(...t){Telegram.WebApp.MainButton.disable(...t),p()}function y(...t){Telegram.WebApp.MainButton.showProgress(...t),p()}function C(...t){Telegram.WebApp.MainButton.hideProgress(...t),p()}function B(...t){Telegram.WebApp.MainButton.setParams(...t),p()}function Be(){const{onEvent:t}=b(),o=(e,a)=>t("mainButtonClicked",e,a);return{mainButtonText:m({get(){return V.value},set(e){v(e)}}),mainButtonColor:m({get(){return U.value},set(e){B({color:e})}}),mainButtonTextColor:m({get(){return E.value},set(e){B({text_color:e})}}),isMainButtonVisible:m({get(){return N.value},set(e){e?M():S()}}),isMainButtonActive:m({get(){return O.value},set(e){e?h():x()}}),isMainButtonProgressVisible:m({get(){return R.value},set(e){e?y():C()}}),setMainButtonText:v,onMainButtonClicked:o,showMainButton:M,hideMainButton:S,enableMainButton:h,disableMainButton:x,showMainButtonProgress:y,hideMainButtonProgress:C,setMainButtonParams:B}}Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;b();n(Telegram.WebApp.SettingsButton.isVisible);n(Telegram.WebApp.colorScheme);n(Telegram.WebApp.themeParams);n(Telegram.WebApp.headerColor);n(Telegram.WebApp.backgroundColor);n(Telegram.WebApp.isExpanded);n(Telegram.WebApp.viewportHeight);n(Telegram.WebApp.viewportStableHeight);n(Telegram.WebApp.isVerticalSwipesEnabled);const w="initData",fe="tgWebApp",We=G(fe,()=>{const t=n(null),o=n(null),e=n(null),a=n(null),i=()=>{t.value=b(),t.value.version>"6.0"&&(l(),A())},l=()=>{window.Telegram.WebApp.CloudStorage.getItem(w,(s,r)=>{typeof r=="string"&&r===""?(o.value=b().initDataUnsafe,W().setStorageItem(w,JSON.stringify(o.value))):o.value=JSON.parse(r)})},A=()=>{window.Telegram.WebApp.CloudStorage.getItem("initDataSave",(s,r)=>{typeof r=="string"&&r===""?(e.value=b().initData,W().setStorageItem("initDataSave",JSON.stringify(e.value))):e.value=JSON.parse(r)})};return{webAppData:t,dataUnsafe:o,init:i,dataSafe:e,userAuthToken:a,setUserAuthToken:()=>{const s=new URLSearchParams(e.value),r=s.get("hash");s.delete("hash"),s.sort();let g="";for(const[L,q]of s.entries())g+=`${L}=${q}
`;g=g.slice(0,-1);const $=`${g}:${r}`,H=btoa(unescape(encodeURIComponent($)));a.value=H}}}),ve={key:0},Me={__name:"MyIndex",setup(t){const o=K(),{sayExample:e}=ee();e();const a=We();a.init();const i=async()=>{a.userAuthToken==null&&a.setUserAuthToken(),await o.$apiService.createPortfolio({name:"test",ownerID:a.dataUnsafe.user.id},a.userAuthToken)};return f(()=>{o.$sayHello()}),(l,A)=>d(a).dataUnsafe?(j(),z("div",ve,[Q("h1",null,"Hello Telegram mini app, my name is "+X(d(a).dataUnsafe.user.first_name),1),Y(d(te),{onClick:i})])):Z("",!0)}},he=Me;export{he as default};
