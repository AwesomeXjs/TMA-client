import{v as q,g as c,x as f,R as P,r as n,K as m,S as G,T as j,B as F,U as d,o as K,c as z,a as Q,t as X,b as Y,V as Z}from"./COP4dXfR.js";const ee=()=>({sayExample:()=>console.log("HELLO FROM COMPOSABLES")}),te=q({__name:"MainButton",props:{text:{type:String},color:{type:String},textColor:{type:String},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},progress:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:o}){const e=t,a=o,{setMainButtonParams:r,onMainButtonClicked:s,hideMainButton:p,showMainButtonProgress:T,hideMainButtonProgress:l}=Be();return c(()=>e.text,i=>{r({text:i})}),c(()=>e.color,i=>{r({color:i})}),c(()=>e.textColor,i=>{r({text_color:i})}),c(()=>e.visible,i=>{r({is_visible:i})}),c(()=>e.disabled,i=>{r({is_active:!i})}),c(()=>e.progress,i=>{i?T():l()}),s(()=>a("click")),f(()=>{e.progress?T():l(),r({text:e.text,text_color:e.textColor,color:e.color,is_active:!e.disabled,is_visible:e.visible})}),P(()=>{l(),p()}),(i,b)=>null}}),{initData:ae,initDataUnsafe:ne,version:oe,platform:re,isVersionAtLeast:_,sendData:ie,close:se}=Telegram.WebApp,k=n(!1),le=(...t)=>{Telegram.WebApp.ready(...t),k.value=!0},D=t=>Telegram.WebApp.platform===t,I=D("unknown"),pe={ClosingConfirmation:"6.2",CloudStorage:"6.9",RequestWriteAccess:"6.9",RequestContact:"6.9",SettingsButton:"7.0",BiometricManager:"7.2",DisableVerticalSwipes:"7.7"},ue=t=>_(pe[t]),ce=!I&&Telegram.WebApp.initData==="";function A(){return{initData:ae,initDataUnsafe:ne,version:oe,platform:re,isVersionAtLeast:_,onEvent:(t,o,e={manual:!1})=>{const{manual:a}=e,r=()=>{Telegram.WebApp.onEvent(t,o)},s=()=>{Telegram.WebApp.offEvent(t,o)};return a?r():(f(r),P(s)),{off:s}},sendData:ie,ready:le,close:se,isReady:G(k),isPlatform:D,isPlatformUnknown:I,isFeatureSupported:ue,canSendData:ce}}n(Telegram.WebApp.BackButton.isVisible);Telegram.WebApp.BiometricManager;n(Telegram.WebApp.BiometricManager.isInited);n(Telegram.WebApp.BiometricManager.isBiometricAvailable);n(Telegram.WebApp.BiometricManager.biometricType);n(Telegram.WebApp.BiometricManager.isAccessRequested);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.isAccessGranted);n(Telegram.WebApp.BiometricManager.deviceId);Telegram.WebApp;n(Telegram.WebApp.isClosingConfirmationEnabled);const g=Telegram.WebApp.CloudStorage;function me(t,o){return new Promise((e,a)=>{g.setItem(t,o,(r,s)=>{r&&a(r),e(s)})})}function ge(t){return new Promise((o,e)=>{g.getItem(t,(a,r)=>{a&&e(a),o(r)})})}function be(t){return new Promise((o,e)=>{g.getItems(t,(a,r)=>{a&&e(a),o(r)})})}function Ae(t){return new Promise((o,e)=>{g.removeItem(t,(a,r)=>{a&&e(a),o(r)})})}function Te(t){return new Promise((o,e)=>{g.removeItems(t,(a,r)=>{a&&e(a),o(r)})})}function de(){return new Promise((t,o)=>{g.getKeys((e,a)=>{e&&o(e),t(a)})})}function W(){return{setStorageItem:me,getStorageItem:ge,getStorageItems:be,removeStorageItem:Ae,removeStorageItems:Te,getStorageKeys:de}}Telegram.WebApp.HapticFeedback;const V=n(Telegram.WebApp.MainButton.text),E=n(Telegram.WebApp.MainButton.color),U=n(Telegram.WebApp.MainButton.textColor),N=n(Telegram.WebApp.MainButton.isVisible),O=n(Telegram.WebApp.MainButton.isActive),R=n(Telegram.WebApp.MainButton.isProgressVisible);function u(){V.value=Telegram.WebApp.MainButton.text,E.value=Telegram.WebApp.MainButton.color,U.value=Telegram.WebApp.MainButton.textColor,N.value=Telegram.WebApp.MainButton.isVisible,O.value=Telegram.WebApp.MainButton.isActive,R.value=Telegram.WebApp.MainButton.isProgressVisible}function v(...t){Telegram.WebApp.MainButton.setText(...t),u()}function M(...t){Telegram.WebApp.MainButton.show(...t),u()}function h(...t){Telegram.WebApp.MainButton.hide(...t),u()}function S(...t){Telegram.WebApp.MainButton.enable(...t),u()}function y(...t){Telegram.WebApp.MainButton.disable(...t),u()}function x(...t){Telegram.WebApp.MainButton.showProgress(...t),u()}function C(...t){Telegram.WebApp.MainButton.hideProgress(...t),u()}function B(...t){Telegram.WebApp.MainButton.setParams(...t),u()}function Be(){const{onEvent:t}=A(),o=(e,a)=>t("mainButtonClicked",e,a);return{mainButtonText:m({get(){return V.value},set(e){v(e)}}),mainButtonColor:m({get(){return E.value},set(e){B({color:e})}}),mainButtonTextColor:m({get(){return U.value},set(e){B({text_color:e})}}),isMainButtonVisible:m({get(){return N.value},set(e){e?M():h()}}),isMainButtonActive:m({get(){return O.value},set(e){e?S():y()}}),isMainButtonProgressVisible:m({get(){return R.value},set(e){e?x():C()}}),setMainButtonText:v,onMainButtonClicked:o,showMainButton:M,hideMainButton:h,enableMainButton:S,disableMainButton:y,showMainButtonProgress:x,hideMainButtonProgress:C,setMainButtonParams:B}}Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;Telegram.WebApp;A();n(Telegram.WebApp.SettingsButton.isVisible);n(Telegram.WebApp.colorScheme);n(Telegram.WebApp.themeParams);n(Telegram.WebApp.headerColor);n(Telegram.WebApp.backgroundColor);n(Telegram.WebApp.isExpanded);n(Telegram.WebApp.viewportHeight);n(Telegram.WebApp.viewportStableHeight);n(Telegram.WebApp.isVerticalSwipesEnabled);const w="initData",fe="tgWebApp",We=j(fe,()=>{const t=n(null),o=n(null),e=n(null),a=n(null),r=()=>{t.value=A(),t.value.version>"6.0"&&(s(),p(),T())},s=()=>{window.Telegram.WebApp.CloudStorage.getItem(w,(l,i)=>{typeof i=="string"&&i===""?(o.value=A().initDataUnsafe,W().setStorageItem(w,JSON.stringify(o.value))):o.value=JSON.parse(i)})},p=()=>{window.Telegram.WebApp.CloudStorage.getItem("initDataSave",(l,i)=>{typeof i=="string"&&i===""?(e.value=A().initData,W().setStorageItem("initDataSave",JSON.stringify(e.value))):e.value=JSON.parse(i)})},T=()=>{const l=new URLSearchParams(e.value),i=l.get("hash");l.delete("hash"),l.sort();let b="";for(const[H,J]of l.entries())b+=`${H}=${J}
`;b=b.slice(0,-1);const $=`${b}:${i}`,L=btoa(unescape(encodeURIComponent($)));a.value=L};return{webAppData:t,dataUnsafe:o,init:r,dataSafe:e,userAuthToken:a}}),ve={key:0},Me={__name:"MyIndex",setup(t){const o=F(),{sayExample:e}=ee();e();const a=We();a.init();const r=async()=>{const s=a.userAuthToken;try{const p=await $fetch("/api/v1/create-portfolio",{method:"POST",headers:{"Content-Type":"application/json",TGWebAppToken:`TGWebApp ${s}`},body:JSON.stringify({name:"Shit coins",owner_id:518774723}),baseURL:"http://127.0.0.1:8080"});console.log("response: ",p)}catch(p){console.log("error: ",p)}};return f(()=>{o.$sayHello()}),(s,p)=>d(a).dataUnsafe?(K(),z("div",ve,[Q("h1",null,"Hello Telegram mini app, my name is "+X(d(a).dataUnsafe.user.first_name),1),Y(d(te),{onClick:r})])):Z("",!0)}},Se=Me;export{Se as default};
